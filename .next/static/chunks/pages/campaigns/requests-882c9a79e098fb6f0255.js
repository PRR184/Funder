(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{49433:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return W}});var n=r(15861),s=r(15671),a=r(43144),l=r(60136),c=r(6215),i=r(61120),o=r(87757),u=r.n(o),d=r(67294),p=r(7082),f=r(87462),h=r(30335),v=r(86010),m=(r(45697),r(92063)),Z=r(28935),x=r(12519),g=r(92248);function b(e){var t=e.children,r=e.className,n=(0,v.Z)(r),s=(0,Z.Z)(b,e),a=(0,x.Z)(b,e);return d.createElement(a,(0,f.Z)({},s,{className:n}),t)}b.handledProps=["as","children","className"],b.defaultProps={as:"tbody"},b.propTypes={};var w=b,y=r(4788),j=r(65382);function R(e){var t=e.active,r=e.children,n=e.className,s=e.collapsing,a=e.content,l=e.disabled,c=e.error,i=e.icon,o=e.negative,u=e.positive,p=e.selectable,h=e.singleLine,b=e.textAlign,w=e.verticalAlign,y=e.warning,G=e.width,k=(0,v.Z)((0,m.lG)(t,"active"),(0,m.lG)(s,"collapsing"),(0,m.lG)(l,"disabled"),(0,m.lG)(c,"error"),(0,m.lG)(o,"negative"),(0,m.lG)(u,"positive"),(0,m.lG)(p,"selectable"),(0,m.lG)(h,"single line"),(0,m.lG)(y,"warning"),(0,m.X4)(b),(0,m.Ok)(w),(0,m.H0)(G,"wide"),n),A=(0,Z.Z)(R,e),N=(0,x.Z)(R,e);return g.kK(r)?d.createElement(N,(0,f.Z)({},A,{className:k}),j.Z.create(i),a):d.createElement(N,(0,f.Z)({},A,{className:k}),r)}R.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],R.defaultProps={as:"td"},R.propTypes={},R.create=(0,y.u5)(R,(function(e){return{content:e}}));var G=R;function k(e){var t=e.children,r=e.className,n=e.content,s=e.fullWidth,a=(0,v.Z)((0,m.lG)(s,"full-width"),r),l=(0,Z.Z)(k,e),c=(0,x.Z)(k,e);return d.createElement(c,(0,f.Z)({},l,{className:a}),g.kK(t)?n:t)}k.handledProps=["as","children","className","content","fullWidth"],k.defaultProps={as:"thead"},k.propTypes={};var A=k;function N(e){var t=e.as,r=(0,Z.Z)(N,e);return d.createElement(A,(0,f.Z)({},r,{as:t}))}N.handledProps=["as"],N.propTypes={},N.defaultProps={as:"tfoot"};var P=N;function C(e){var t=e.as,r=e.className,n=e.sorted,s=(0,v.Z)((0,m.cD)(n,"sorted"),r),a=(0,Z.Z)(C,e);return d.createElement(G,(0,f.Z)({},a,{as:t,className:s}))}C.handledProps=["as","className","sorted"],C.propTypes={},C.defaultProps={as:"th"};var E=C;function q(e){var t=e.active,r=e.cellAs,n=e.cells,s=e.children,a=e.className,l=e.disabled,c=e.error,i=e.negative,o=e.positive,u=e.textAlign,p=e.verticalAlign,b=e.warning,w=(0,v.Z)((0,m.lG)(t,"active"),(0,m.lG)(l,"disabled"),(0,m.lG)(c,"error"),(0,m.lG)(i,"negative"),(0,m.lG)(o,"positive"),(0,m.lG)(b,"warning"),(0,m.X4)(u),(0,m.Ok)(p),a),y=(0,Z.Z)(q,e),j=(0,x.Z)(q,e);return g.kK(s)?d.createElement(j,(0,f.Z)({},y,{className:w}),(0,h.Z)(n,(function(e){return G.create(e,{defaultProps:{as:r}})}))):d.createElement(j,(0,f.Z)({},y,{className:w}),s)}q.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],q.defaultProps={as:"tr",cellAs:"td"},q.propTypes={},q.create=(0,y.u5)(q,(function(e){return{cells:e}}));var _=q;function B(e){var t=e.attached,r=e.basic,n=e.celled,s=e.children,a=e.className,l=e.collapsing,c=e.color,i=e.columns,o=e.compact,u=e.definition,p=e.fixed,b=e.footerRow,y=e.headerRow,j=e.headerRows,R=e.inverted,G=e.padded,k=e.renderBodyRow,N=e.selectable,C=e.singleLine,E=e.size,q=e.sortable,T=e.stackable,O=e.striped,F=e.structured,H=e.tableData,L=e.textAlign,D=e.unstackable,X=e.verticalAlign,K=(0,v.Z)("ui",c,E,(0,m.lG)(n,"celled"),(0,m.lG)(l,"collapsing"),(0,m.lG)(u,"definition"),(0,m.lG)(p,"fixed"),(0,m.lG)(R,"inverted"),(0,m.lG)(N,"selectable"),(0,m.lG)(C,"single line"),(0,m.lG)(q,"sortable"),(0,m.lG)(T,"stackable"),(0,m.lG)(O,"striped"),(0,m.lG)(F,"structured"),(0,m.lG)(D,"unstackable"),(0,m.sU)(t,"attached"),(0,m.sU)(r,"basic"),(0,m.sU)(o,"compact"),(0,m.sU)(G,"padded"),(0,m.X4)(L),(0,m.Ok)(X),(0,m.H0)(i,"column"),"table",a),U=(0,Z.Z)(B,e),z=(0,x.Z)(B,e);if(!g.kK(s))return d.createElement(z,(0,f.Z)({},U,{className:K}),s);var I={defaultProps:{cellAs:"th"}},W=(y||j)&&d.createElement(A,null,_.create(y,I),(0,h.Z)(j,(function(e){return _.create(e,I)})));return d.createElement(z,(0,f.Z)({},U,{className:K}),W,d.createElement(w,null,k&&(0,h.Z)(H,(function(e,t){return _.create(k(e,t))}))),b&&d.createElement(P,null,_.create(b)))}B.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],B.defaultProps={as:"table"},B.propTypes={},B.Body=w,B.Cell=G,B.Footer=P,B.Header=A,B.HeaderCell=E,B.Row=_;var T=B,O=r(48237),F=r(66456),H=r(65091),L=r(97326),D=r(4942),X=r(61483),K=r(85893);function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.Z)(e);if(t){var s=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var z=function(e){(0,l.Z)(r,e);var t=U(r);function r(){var e;(0,s.Z)(this,r);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return e=t.call.apply(t,[this].concat(l)),(0,D.Z)((0,L.Z)(e),"onApprove",(0,n.Z)(u().mark((function t(){var r,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,H.Z)(e.props.address),t.next=3,X.Z.eth.getAccounts();case 3:return n=t.sent,t.next=6,r.methods.approveRequest(e.props.id).send({from:n[0]});case 6:case"end":return t.stop()}}),t)})))),(0,D.Z)((0,L.Z)(e),"onFinalise",(0,n.Z)(u().mark((function t(){var r,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,H.Z)(e.props.address),t.next=3,X.Z.eth.getAccounts();case 3:return n=t.sent,t.next=6,r.methods.finalizeRequest(e.props.id).send({from:n[0]});case 6:case"end":return t.stop()}}),t)})))),e}return(0,a.Z)(r,[{key:"render",value:function(){var e=T.Row,t=T.Cell,r=this.props,n=r.id,s=r.request,a=r.approversCount,l=s.approvalCount>a/2;return(0,K.jsxs)(e,{disabled:s.complete,positive:l&&!s.complete,children:[(0,K.jsx)(t,{children:n}),(0,K.jsx)(t,{children:s.description}),(0,K.jsx)(t,{children:X.Z.utils.fromWei(s.value,"ether")}),(0,K.jsx)(t,{children:s.recipient}),(0,K.jsxs)(t,{children:[s.approvalCount," / ",a]}),(0,K.jsx)(t,{children:s.complete?null:(0,K.jsx)(O.Z,{color:"green",basic:!0,onClick:this.onApprove,children:"Approve"})}),(0,K.jsx)(t,{children:s.complete?null:(0,K.jsx)(O.Z,{color:"teal",basic:!0,onClick:this.onFinalise,children:"Finalise"})})]})}}]),r}(d.Component);function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.Z)(e);if(t){var s=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var W=function(e){(0,l.Z)(r,e);var t=I(r);function r(){return(0,s.Z)(this,r),t.apply(this,arguments)}return(0,a.Z)(r,[{key:"renderRow",value:function(){var e=this;return this.props.requests.map((function(t,r){return(0,K.jsx)(z,{request:t,id:r,address:e.props.address,approversCount:e.props.approversCount},r)}))}},{key:"render",value:function(){var e=T.Header,t=T.Row,r=T.HeaderCell,n=T.Body;return(0,K.jsxs)(p.Z,{children:[(0,K.jsx)("h3",{children:"Request List"}),(0,K.jsx)(F.Link,{route:"/campaigns/".concat(this.props.address,"/requests/new"),children:(0,K.jsx)("a",{children:(0,K.jsx)(O.Z,{primary:!0,floated:"right",style:{marginBottom:10},children:"Add Request"})})}),(0,K.jsxs)(T,{celled:!0,children:[(0,K.jsx)(e,{children:(0,K.jsxs)(t,{children:[(0,K.jsx)(r,{children:"ID"}),(0,K.jsx)(r,{children:"Description"}),(0,K.jsx)(r,{children:"Amount (Ether)"}),(0,K.jsx)(r,{children:"Recipient"}),(0,K.jsx)(r,{children:"Approval Count"}),(0,K.jsx)(r,{children:"Approve"}),(0,K.jsx)(r,{children:"Finalise"})]})}),(0,K.jsx)(n,{children:this.renderRow()})]}),(0,K.jsxs)("div",{children:["Found ",this.props.requestCount," requests."]})]})}}],[{key:"getInitialProps",value:function(){var e=(0,n.Z)(u().mark((function e(t){var r,n,s,a,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.query.address,n=(0,H.Z)(r),e.next=4,n.methods.getRequestsCount().call();case 4:return s=e.sent,e.next=7,n.methods.approversCount().call();case 7:return a=e.sent,e.next=10,Promise.all(Array(parseInt(s)).fill().map((function(e,t){return n.methods.requests(t).call()})));case 10:return l=e.sent,e.abrupt("return",{address:r,requests:l,requestCount:s,approversCount:a});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(d.Component)},19553:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return r(49433)}])},4942:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:function(){return n}})}},function(e){e.O(0,[774,933,83,682,888,179],(function(){return t=19553,e(e.s=t);var t}));var t=e.O();_N_E=t}]);